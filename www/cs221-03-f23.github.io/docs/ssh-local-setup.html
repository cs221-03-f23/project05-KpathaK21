<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>SSH Local Setup | CS 221 - C and Systems Programming</title>
<meta name="generator" content="Jekyll v4.2.1" />
<meta property="og:title" content="SSH Local Setup" />
<meta name="author" content="Phil Peterson" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="You need to be able to run git from your laptop, and git uses ssh to communicate with github.com If you already have ssh keys and you can use them with github.com you can skip to Step 3. To check, try to ssh to github.com and ensure that you get the output shown below $ ssh git@github.com Hi username! You&#39;ve successfully authenticated, but GitHub does not provide shell access. Connection to github.com closed. If you can not successfully authenticate to github.com then follow the remaining ssh setup steps Create the ssh directory (it’s ok if it already exists) $ mkdir ~/.ssh cd into the ssh directory $ cd ~/.ssh Look for an ssh key pair in that directory $ ls id_ed25519 id_ed25519.pub id_ed25519.pub is your public key and can be shared with github.com or other servers. id_ed25519 is your private key and should not be shared with anyone. If you do not have a key pair, you should create them (substituting your own email address) $ ssh-keygen -t ed25519 -C &quot;YOUR_USF_USERNAME@dons.usfca.edu&quot; When ssh-keygen asks you to choose a filename, just hit return to take the default filename When ssh-keygen asks you to choose a passphrase for your private key, use a passphrase you will remember. Do not forget this passphrase! Configure ssh on your laptop Create/edit the file named ~/.ssh/config to add the following text (Mac, Windows)" />
<meta property="og:description" content="You need to be able to run git from your laptop, and git uses ssh to communicate with github.com If you already have ssh keys and you can use them with github.com you can skip to Step 3. To check, try to ssh to github.com and ensure that you get the output shown below $ ssh git@github.com Hi username! You&#39;ve successfully authenticated, but GitHub does not provide shell access. Connection to github.com closed. If you can not successfully authenticate to github.com then follow the remaining ssh setup steps Create the ssh directory (it’s ok if it already exists) $ mkdir ~/.ssh cd into the ssh directory $ cd ~/.ssh Look for an ssh key pair in that directory $ ls id_ed25519 id_ed25519.pub id_ed25519.pub is your public key and can be shared with github.com or other servers. id_ed25519 is your private key and should not be shared with anyone. If you do not have a key pair, you should create them (substituting your own email address) $ ssh-keygen -t ed25519 -C &quot;YOUR_USF_USERNAME@dons.usfca.edu&quot; When ssh-keygen asks you to choose a filename, just hit return to take the default filename When ssh-keygen asks you to choose a passphrase for your private key, use a passphrase you will remember. Do not forget this passphrase! Configure ssh on your laptop Create/edit the file named ~/.ssh/config to add the following text (Mac, Windows)" />
<meta property="og:site_name" content="CS 221 - C and Systems Programming" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2023-12-04T21:53:57+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="SSH Local Setup" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"Phil Peterson"},"headline":"SSH Local Setup","dateModified":"2023-12-04T21:53:57+00:00","datePublished":"2023-12-04T21:53:57+00:00","description":"You need to be able to run git from your laptop, and git uses ssh to communicate with github.com If you already have ssh keys and you can use them with github.com you can skip to Step 3. To check, try to ssh to github.com and ensure that you get the output shown below $ ssh git@github.com Hi username! You&#39;ve successfully authenticated, but GitHub does not provide shell access. Connection to github.com closed. If you can not successfully authenticate to github.com then follow the remaining ssh setup steps Create the ssh directory (it’s ok if it already exists) $ mkdir ~/.ssh cd into the ssh directory $ cd ~/.ssh Look for an ssh key pair in that directory $ ls id_ed25519 id_ed25519.pub id_ed25519.pub is your public key and can be shared with github.com or other servers. id_ed25519 is your private key and should not be shared with anyone. If you do not have a key pair, you should create them (substituting your own email address) $ ssh-keygen -t ed25519 -C &quot;YOUR_USF_USERNAME@dons.usfca.edu&quot; When ssh-keygen asks you to choose a filename, just hit return to take the default filename When ssh-keygen asks you to choose a passphrase for your private key, use a passphrase you will remember. Do not forget this passphrase! Configure ssh on your laptop Create/edit the file named ~/.ssh/config to add the following text (Mac, Windows)","url":"/docs/ssh-local-setup","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"/docs/ssh-local-setup"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="../assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="../feed.xml" title="CS 221 - C and Systems Programming" /><head>
  <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@600&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Fira+Sans+Condensed:wght@400&display=swap" rel="stylesheet">
</head>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="../index.html">CS 221 - C and Systems Programming</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="../help/index.html">Getting Help</a><a class="page-link" href="../syllabus/index.html">Syllabus</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper"><h1 class="page-heading">SSH Local Setup</h1><ol>
  <li>You need to be able to run <code class="language-plaintext highlighter-rouge">git</code> from your laptop, and <code class="language-plaintext highlighter-rouge">git</code> uses <code class="language-plaintext highlighter-rouge">ssh</code> to communicate with <code class="language-plaintext highlighter-rouge">github.com</code></li>
  <li>If you already have <code class="language-plaintext highlighter-rouge">ssh</code> keys and you can use them with <code class="language-plaintext highlighter-rouge">github.com</code> you can skip to Step 3. To check, try to <code class="language-plaintext highlighter-rouge">ssh</code> to <code class="language-plaintext highlighter-rouge">github.com</code> and ensure that you get the output shown below
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>ssh git@github.com
 Hi username! You<span class="s1">'ve successfully authenticated, but GitHub does not provide shell access.
 Connection to github.com closed.
</span></code></pre></div>    </div>
  </li>
  <li>If you can not successfully authenticate to <code class="language-plaintext highlighter-rouge">github.com</code> then follow the remaining <code class="language-plaintext highlighter-rouge">ssh</code> setup steps</li>
  <li>Create the ssh directory (it’s ok if it already exists)
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span><span class="nb">mkdir</span> ~/.ssh
</code></pre></div>    </div>
  </li>
  <li><code class="language-plaintext highlighter-rouge">cd</code> into the ssh directory
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span><span class="nb">cd</span> ~/.ssh
</code></pre></div>    </div>
  </li>
  <li>Look for an ssh key pair in that directory
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span><span class="nb">ls
 </span>id_ed25519 id_ed25519.pub
</code></pre></div>    </div>
    <p><code class="language-plaintext highlighter-rouge">id_ed25519.pub</code> is your public key and can be shared with <code class="language-plaintext highlighter-rouge">github.com</code> or other servers. <code class="language-plaintext highlighter-rouge">id_ed25519</code> is your private key and should not be shared with anyone.</p>
  </li>
  <li>If you do not have a key pair, you should create them (substituting your own email address)
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>ssh-keygen <span class="nt">-t</span> ed25519 <span class="nt">-C</span> <span class="s2">"YOUR_USF_USERNAME@dons.usfca.edu"</span>
</code></pre></div>    </div>
    <ol>
      <li>When <code class="language-plaintext highlighter-rouge">ssh-keygen</code> asks you to choose a filename, just hit return to take the default filename</li>
      <li>When <code class="language-plaintext highlighter-rouge">ssh-keygen</code> asks you to choose a passphrase for your private key, use a passphrase you will remember. Do not forget this passphrase!</li>
    </ol>
  </li>
  <li>Configure <code class="language-plaintext highlighter-rouge">ssh</code> on your laptop
    <ol>
      <li>Create/edit the file named <code class="language-plaintext highlighter-rouge">~/.ssh/config</code> to add the following text (<a onclick="toggle_display('ssh_config_mac')">Mac</a>, <a onclick="toggle_display('ssh_config_win')">Windows</a>)</li>
    </ol>

    <div id="ssh_config_mac" class="div-toggle" style="display:none">
      <p>For Mac:</p>
      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> Host github.com
   AddKeysToAgent yes
   ForwardAgent yes
   IdentityFile ~/.ssh/id_ed25519
   UseKeychain yes
   User YOUR_GITHUB_USERNAME
</code></pre></div>      </div>
    </div>

    <div id="ssh_config_win" class="div-toggle" style="display:none">
      <p>For Windows Git Bash:</p>
      <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> Host github.com
   AddKeysToAgent yes
   ForwardAgent yes
   IdentityFile ~/.ssh/id_ed25519
   User YOUR_GITHUB_USERNAME
</code></pre></div>      </div>
    </div>
  </li>
  <li>
    <p>Setup <code class="language-plaintext highlighter-rouge">ssh-agent</code>. The <code class="language-plaintext highlighter-rouge">ssh-agent</code> program runs in the background, waiting for an authentication request to verify using your private key. <code class="language-plaintext highlighter-rouge">git clone</code> and <code class="language-plaintext highlighter-rouge">git push</code> use ssh authentication, and <code class="language-plaintext highlighter-rouge">ssh-agent</code> does the work. (<a onclick="toggle_display('ssh_agent_mac')">Mac</a>, <a onclick="toggle_display('ssh_agent_win')">Windows</a>)</p>

    <div id="ssh_agent_mac" class="div-toggle" style="display:none">
      <p>For Mac:</p>
      <ul>
        <li>Nothing to do. macOS runs <code class="language-plaintext highlighter-rouge">ssh-agent</code> automatically</li>
      </ul>
    </div>

    <div id="ssh_agent_win" class="div-toggle" style="display:none">
      <p>For Windows Git Bash:</p>
      <ol>
        <li>Edit <code class="language-plaintext highlighter-rouge">~/.bashrc</code> to include these lines
          <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nb">env</span><span class="o">=</span>~/.ssh/agent.env

 agent_load_env <span class="o">()</span> <span class="o">{</span> <span class="nb">test</span> <span class="nt">-f</span> <span class="s2">"</span><span class="nv">$env</span><span class="s2">"</span> <span class="o">&amp;&amp;</span> <span class="nb">.</span> <span class="s2">"</span><span class="nv">$env</span><span class="s2">"</span> <span class="o">&gt;</span>| /dev/null <span class="p">;</span> <span class="o">}</span>

 agent_start <span class="o">()</span> <span class="o">{</span>
     <span class="o">(</span><span class="nb">umask </span>077<span class="p">;</span> ssh-agent <span class="o">&gt;</span>| <span class="s2">"</span><span class="nv">$env</span><span class="s2">"</span><span class="o">)</span>
     <span class="nb">.</span> <span class="s2">"</span><span class="nv">$env</span><span class="s2">"</span> <span class="o">&gt;</span>| /dev/null <span class="p">;</span> <span class="o">}</span>

 agent_load_env

 <span class="c"># agent_run_state: 0=agent running w/ key; 1=agent w/o key; 2=agent not running</span>
 <span class="nv">agent_run_state</span><span class="o">=</span><span class="si">$(</span>ssh-add <span class="nt">-l</span> <span class="o">&gt;</span>| /dev/null 2&gt;&amp;1<span class="p">;</span> <span class="nb">echo</span> <span class="nv">$?</span><span class="si">)</span>

 <span class="k">if</span> <span class="o">[</span> <span class="o">!</span> <span class="s2">"</span><span class="nv">$SSH_AUTH_SOCK</span><span class="s2">"</span> <span class="o">]</span> <span class="o">||</span> <span class="o">[</span> <span class="nv">$agent_run_state</span> <span class="o">=</span> 2 <span class="o">]</span><span class="p">;</span> <span class="k">then
     </span>agent_start
     ssh-add
 <span class="k">elif</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$SSH_AUTH_SOCK</span><span class="s2">"</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="o">[</span> <span class="nv">$agent_run_state</span> <span class="o">=</span> 1 <span class="o">]</span><span class="p">;</span> <span class="k">then
     </span>ssh-add
 <span class="k">fi

 </span><span class="nb">unset env</span>
</code></pre></div>          </div>
        </li>
        <li>Save and exit the editor. Then reload your shell environment
          <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span><span class="nb">source</span> ~/.bashrc
</code></pre></div>          </div>
        </li>
      </ol>
    </div>
  </li>
  <li>
    <p>Copy your public key to the clipboard (<a onclick="toggle_display('clipboard_mac')">Mac</a>, <a onclick="toggle_display('clipboard_win')">Windows</a>)</p>

    <div id="clipboard_mac" class="div-toggle" style="display:none">
      <p>For Mac:</p>
      <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span><span class="nb">cat </span>id_ed25519.pub | pbcopy
</code></pre></div>      </div>
    </div>

    <div id="clipboard_win" class="div-toggle" style="display:none">
      <p>For Windows Git Bash:</p>
      <ul>
        <li>Open Notepad, File &gt; Open, navigate to c:\Users\YOUR_WINDOWS_USERNAME.ssh</li>
        <li>Open your public key (<code class="language-plaintext highlighter-rouge">id_ed25519.pub</code>)</li>
        <li>Select All, and Copy it to the clipboard</li>
      </ul>
    </div>
  </li>
  <li>Paste your public key into your <code class="language-plaintext highlighter-rouge">github.com</code> account
    <ol>
      <li>Create an account on <a href="https://github.com">github.com</a> if you don’t already have one</li>
      <li>Go to Profile &gt; Settings &gt; SSH and GPG Keys and click a New SSH key</li>
      <li>Give the key a Title, and paste the contents of the clipboard into the Key box</li>
    </ol>
  </li>
  <li>To test that the preceding steps were successful
    <ol>
      <li>Close the terminal you were using, open a new one, and type
        <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>ssh git@github.com
 PTY allocation request failed on channel 0
 Hi YOUR_GITHUB_USERNAME! You<span class="s1">'ve successfully authenticated, but GitHub does not provide shell access.
 Connection to github.com closed.
</span></code></pre></div>        </div>
      </li>
    </ol>
  </li>
</ol>

<script>
    function toggle_display(id_name) {
        var e = document.getElementById(id_name);
        if (e.style.display === "none") {
            e.style.display = "block";
        } else {
            e.style.display = "none";
        }
    }
</script>


      </div>
    </main>

  </body>

</html>
